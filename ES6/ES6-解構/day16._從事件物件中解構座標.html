<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mouse Shadow</title>
  </head>
  <body>
    <div class="hero">
      <h1 contenteditable>ğŸ”¥WOAH!</h1>
    </div>

    <style>
      html {
        color: black;
        font-family: sans-serif;
      }

      body {
        margin: 0;
      }

      .hero {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: black;
      }

      h1 {
        text-shadow: 10px 10px 0 rgba(0, 0, 0, 1);
        font-size: 100px;
      }
    </style>

    <script>
      (function () {
        // è¨­å®šé™°å½±è·é›¢é–‹å…ƒç´ 100çš„è·é›¢
        let length = 100;
        let text = document.querySelector("h1");

        // åœ¨ hero class ä¸­ç›£è½mousenoveäº‹ä»¶
        document
          .querySelector(".hero")
          .addEventListener("mousemove", function (e) {
            // å°‡offsetX, offsetYå¾äº‹ä»¶ç‰©ä»¶ä¸­è§£æ§‹
            // æ‹†åˆ†å‡ºæ»‘é¼ åº§æ¨™
            let { offsetX, offsetY } = e;

            // å¦‚æœmousemoveçš„targetä¸æ˜¯ç›£è½çš„ç›®æ¨™ï¼ˆï¼¤ï¼¯ï¼­ä¸­ä¸åªä¸€å±¤ï¼‰
            // å‰‡è¨ˆç®—é»æœƒä»¥ä¸­å¿ƒå­å…ƒç´ ç‚ºä¸»é‡æ–°è¨ˆç®—
            // æ•… (this.target != this) å¦‚æœmousemoveå°è±¡ä¸æ˜¯ç›£è½å°è±¡
            if (e.target !== this) {
              // æŠŠå­å…ƒç´ å¤–å±¤è‡³å®¹å™¨è·é›¢åŠ å›
              offsetX += e.target.offsetLeft;
              offsetY += e.target.offsetTop;
            }

            // è¨ˆç®—è©²ç›®æ¨™åœ¨å®¹å™¨ä¸­çš„ä½ç½®
            // è©²ç›®æ¨™åº§æ¨™ / å¤–ç›’heroçš„ç¸½åº§æ¨™
            // console.log(
            //   offsetX / this.offsetWidth,
            //   offsetY / this.offsetHeight
            // );

            // è¨ˆç®—åŠ ä¸Šé™°å½±å¾Œçš„ç›®æ¨™
            let lengthX =
              // åŸæœ¬åªæœ‰ä¸€å€‹æ–¹å‘(0~1)ï¼Œä½†è‹¥å¸Œæœ›å…©é‚Šéƒ½æœ‰é™°å½±ï¼Œå‰‡è¦æŠŠä¸­å¿ƒé»è®Šç‚º0
              // æ‰€ä»¥ *2 -1 >> 0 *2 => 0~2
              // 0~2 -1 => -1~1
              Math.floor((offsetX / this.offsetWidth) * length) * 2 - length;

            let lengthY =
              Math.floor((offsetY / this.offsetHeight) * length) * 2 - length;

            //text-shadow: h-shadow v-shadow blur-radius color;
            //h-shadowï¼šé™°å½±è·é›¢åŸå§‹å­—ä¸²æ–¼æ°´å¹³æ–¹å‘ä¸Šçš„åº§æ¨™ã€‚
            //v-shadowï¼šé™°å½±è·é›¢åŸå§‹å­—ä¸²æ–¼å‚ç›´æ–¹å‘ä¸Šçš„åº§æ¨™ã€‚
            //blur-radiusï¼šé™°å½±çš„æ¨¡ç³ŠåŠå¾‘ï¼Œé è¨­å€¼ç‚º0ã€‚
            //colorï¼šé™°å½±çš„é¡è‰²ï¼Œè‹¥ç„¡çµ¦å€¼å‰‡é è¨­ç‚ºè·Ÿæœ¬é«”å­—ä¸²çš„é¡è‰²ç›¸åŒã€‚
            text.style.textShadow = ` 
           ${lengthX * -2}px ${lengthY * -2}px 5px rgba(255,0,0,0.8),
           ${lengthX * -2}px ${lengthY * -0.5}px 5px rgba(0,255,0,0.8),
           ${lengthX * 2}px ${lengthY * 2}px 5px rgba(0,0,255,0.8),
           ${lengthX * 2}px ${lengthY * 0.5}px 5px rgba(0,255,255,0.8)
           `;
          });
      })();
    </script>
  </body>
</html>
